# OpenTest extension sample

This projects implements some very simple [OpenTest](https://github.com/mcdcorp/opentest) keywords and can be used as a starting point or example of how to extend the OpenTest functionality with new keywords.

To create a new OpenTest keyword and make it available in your tests, follow the steps below:

1. Create a new Java project.
2. Define a dependency on the [opentest-base](https://github.com/mcdcorp/opentest/tree/master/actor/base) project.
3. Create a new class that extends the `org.getopentest.base.TestAction` class.
4. Override the `run` method and implement it by adding whatever functionality you want your new keyword to perform. Inside of the `run` method you'll have access to a few things that you need that are provided by the base `TestAction` class:
   * A set of methods that provide the values of the arguments supplied to the test action in the test file (e.g. `readStringArgument`, `readIntArgument`, etc.)
   * The `writeOutput` method that allows you to output a value that can be used from subsequent test steps.
   * The `log` object, that can be used to write an entry into the test session log.
   * When you need to signal that the test action failed you can just throw a `RuntimeException`. The test actor will safely catch it and will understand that the action has failed.
5. Build your new project into a JAR.
6. Copy the JAR (along with any dependencies that are not already included with the test actor) into the `user-jars` directory in the working directory of your test actor. When the test actor starts, it will automatically load any JARs it find in that location.

And here's a simple tests that makes use of the sample keywords defined in this project:

```
description: Demonstrate the use of the sample test actions
actors:
  - actor: ACTOR1
    segments:
      - segment: 1
        actions:
          - action: opentest.extension.sample.GreetUser
            args:
              userName: John Doe

          - action: opentest.extension.sample.CalculateAge
            args:
              birthDate: "1983-02-03"

          - script: |
              $log(
                $format(
                  "The calculated age is {0} years",
                  $output.years));
```
